[{"/Users/shuangquan.huang/Documents/git/agorademo/src/index.js":"1","/Users/shuangquan.huang/Documents/git/agorademo/src/App.js":"2","/Users/shuangquan.huang/Documents/git/agorademo/src/reportWebVitals.js":"3","/Users/shuangquan.huang/Documents/git/agorademo/src/store/index.js":"4","/Users/shuangquan.huang/Documents/git/agorademo/src/views/EntryBoard.js":"5","/Users/shuangquan.huang/Documents/git/agorademo/src/views/MeetingBoard.js":"6","/Users/shuangquan.huang/Documents/git/agorademo/src/store/store.js":"7","/Users/shuangquan.huang/Documents/git/agorademo/src/store/selectors/index.js":"8","/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/index.js":"9","/Users/shuangquan.huang/Documents/git/agorademo/src/store/type.js":"10","/Users/shuangquan.huang/Documents/git/agorademo/src/views/JoinMeetingInput.js":"11","/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/entryboard.js":"12","/Users/shuangquan.huang/Documents/git/agorademo/src/store/selectors/common.js":"13","/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/common.js":"14","/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/meetingstatus.js":"15","/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/auth.js":"16","/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/client.js":"17","/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/error.js":"18","/Users/shuangquan.huang/Documents/git/agorademo/src/agora/index.js":"19","/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/index.js":"20","/Users/shuangquan.huang/Documents/git/agorademo/src/agora/configbuilder.js":"21","/Users/shuangquan.huang/Documents/git/agorademo/src/agora/events.js":"22","/Users/shuangquan.huang/Documents/git/agorademo/src/agora/agoraclient.js":"23","/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/auth.js":"24","/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/client.js":"25","/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/meetingstatus.js":"26","/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/error.js":"27","/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/entryboard.js":"28","/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/common.js":"29","/Users/shuangquan.huang/Documents/git/agorademo/src/views/ErrorCard.js":"30","/Users/shuangquan.huang/Documents/git/agorademo/src/views/ConfigInput.js":"31","/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/config.js":"32","/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/config.js":"33"},{"size":616,"mtime":1607398016956,"results":"34","hashOfConfig":"35"},{"size":923,"mtime":1607479068276,"results":"36","hashOfConfig":"35"},{"size":362,"mtime":1607340291073,"results":"37","hashOfConfig":"35"},{"size":97,"mtime":1607398016946,"results":"38","hashOfConfig":"35"},{"size":1753,"mtime":1607478847079,"results":"39","hashOfConfig":"35"},{"size":3731,"mtime":1607479068267,"results":"40","hashOfConfig":"35"},{"size":220,"mtime":1607404885115,"results":"41","hashOfConfig":"35"},{"size":67,"mtime":1607396624953,"results":"42","hashOfConfig":"35"},{"size":498,"mtime":1607476704292,"results":"43","hashOfConfig":"35"},{"size":191,"mtime":1607476704302,"results":"44","hashOfConfig":"35"},{"size":3311,"mtime":1607478847073,"results":"45","hashOfConfig":"35"},{"size":401,"mtime":1607432812465,"results":"46","hashOfConfig":"35"},{"size":96,"mtime":1607396624943,"results":"47","hashOfConfig":"35"},{"size":112,"mtime":1607479068271,"results":"48","hashOfConfig":"35"},{"size":229,"mtime":1607408435214,"results":"49","hashOfConfig":"35"},{"size":482,"mtime":1607413693645,"results":"50","hashOfConfig":"35"},{"size":202,"mtime":1607412023528,"results":"51","hashOfConfig":"35"},{"size":198,"mtime":1607420707865,"results":"52","hashOfConfig":"35"},{"size":288,"mtime":1607478847076,"results":"53","hashOfConfig":"35"},{"size":714,"mtime":1607476927442,"results":"54","hashOfConfig":"35"},{"size":1094,"mtime":1607477387679,"results":"55","hashOfConfig":"35"},{"size":322,"mtime":1607474788462,"results":"56","hashOfConfig":"35"},{"size":2074,"mtime":1607479068274,"results":"57","hashOfConfig":"35"},{"size":257,"mtime":1607413693661,"results":"58","hashOfConfig":"35"},{"size":204,"mtime":1607412023510,"results":"59","hashOfConfig":"35"},{"size":207,"mtime":1607412023553,"results":"60","hashOfConfig":"35"},{"size":202,"mtime":1607420707869,"results":"61","hashOfConfig":"35"},{"size":243,"mtime":1607432812476,"results":"62","hashOfConfig":"35"},{"size":292,"mtime":1607398284583,"results":"63","hashOfConfig":"35"},{"size":1201,"mtime":1607478847061,"results":"64","hashOfConfig":"35"},{"size":6497,"mtime":1607478847069,"results":"65","hashOfConfig":"35"},{"size":473,"mtime":1607478510137,"results":"66","hashOfConfig":"35"},{"size":253,"mtime":1607476927451,"results":"67","hashOfConfig":"35"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},"1hzpdab",{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"79","messages":"80","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"81","usedDeprecatedRules":"70"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"116"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"127","messages":"128","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"129","messages":"130","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"131","messages":"132","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"135","messages":"136","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},"/Users/shuangquan.huang/Documents/git/agorademo/src/index.js",[],["137","138"],"/Users/shuangquan.huang/Documents/git/agorademo/src/App.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/reportWebVitals.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/index.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/views/EntryBoard.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/views/MeetingBoard.js",["139"],"import React, {useEffect, useState} from 'react';\nimport {connect} from 'react-redux';\nimport {StreamPlayer, AgoraClient, AgoraConfigBuilder} from '../agora';\nimport {STORE_TYPE} from '../store';\nimport {errorActions, clientActions, meetingStatusActions} from '../store/actions';\nimport {typedSelector} from '../store/selectors';\nimport {AgoraEvents} from '../agora';\nimport {isEmpty} from 'loadsh';\n// import {Container, Row} from 'react-bootstrap';\nimport './MeetingBoard.scss';\n\nconst MeetingBoard = (props) => {\n\n  const [localStream, setLocalStream] = useState(null);\n  const [remoteStreams, setRemoteStreams] = useState([]);\n\n  const onStreamPublished = (event) => {\n    const { stream } = event;\n    const stop = stream.stop;\n    const close = stream.close;\n\n    stream.close = (func => () => {\n      func();\n      setLocalStream(null);\n    })(close);\n\n    stream.stop = (func => () => {\n      func();\n      setLocalStream(null);\n    })(stop);\n\n    setLocalStream(stream);\n  };\n\n  const onRemoteStreamAdded = (event) => {\n    const {stream} = event;\n    if (stream) {\n      const streamId = stream.getId();\n      if (!remoteStreams.find(item => item.getId() === streamId)) {\n        setRemoteStreams([...remoteStreams, stream]);\n      }\n    }\n  };\n\n  const onRemoteStreamRemoved = (event) => {\n    const {stream} = event;\n    if (stream) {\n      const streamId = stream.getId();\n      const index = remoteStreams.findIndex(stream => stream.getId() === streamId);\n      if (index >= 0) {\n        remoteStreams.splice(index, 1);\n        setRemoteStreams(remoteStreams);\n      }\n    }\n  };\n\n  useEffect(() => {\n    const {\n      token,\n      applicationId,\n      channel,\n      userId,\n      codec,\n      mode,\n      camera,\n      microphone\n    } = props;\n\n    if (isEmpty(applicationId)) {\n      return;\n    }\n\n    const client = new AgoraClient();\n    const configBuilder = new AgoraConfigBuilder();\n    const config = configBuilder.setCodec(codec)\n      .setMode(mode)\n      .setMicrophoneId(microphone && microphone.deviceId)\n      .setCameraId(camera && camera.deviceId)\n      .build();\n    client.createClient(config);\n\n    client.init(applicationId)\n      .then(() => client.join({token, channel, userId}))\n      .then(() => {\n        client.addEventListener(AgoraEvents.STREAM_PUBLISHD, onStreamPublished);\n        client.addEventListener(AgoraEvents.STREAM_ADDED, onRemoteStreamAdded);\n        client.addEventListener(AgoraEvents.STREAM_REMOVED, onRemoteStreamRemoved)\n      })\n      .then(() => client.startStream({audio: true, video: true}))\n      .catch(e => {\n        props.setError(e);\n        props.setMeetingStarted(false);\n    });\n\n    props.setClient(client);\n  }, []);\n\n  const getStreams = () => {\n    const streams = [];\n    if (localStream) {\n      streams.push(\n        <StreamPlayer stream={localStream} label={'local'} key={'local'}/>\n      )\n    }\n\n    remoteStreams\n      .filter(stream => stream.hasVideo())\n      .forEach(stream => {\n      const streamId = stream.getId();\n      streams.push(\n        <StreamPlayer stream={stream} label={streamId} key={streamId}/>\n      )\n    })\n\n    return streams;\n  }\n\n  return (\n    <div className={'meeting-board'}>\n      {getStreams()}\n    </div>\n  )\n}\n\nexport default connect(\n  state => {\n    const {token, applicationId, channel} = typedSelector(state, STORE_TYPE.AUTH);\n    const {codec, mode, camera, microphone} = typedSelector(state, STORE_TYPE.CONFIG);\n\n    return {\n      applicationId,\n      token,\n      channel,\n      codec,\n      mode,\n      camera,\n      microphone\n    };\n  },\n  {\n    setClient: clientActions.setClient,\n    setError: errorActions.setError,\n    setMeetingStarted: meetingStatusActions.setMeetingStarted,\n  }\n)(MeetingBoard);\n","/Users/shuangquan.huang/Documents/git/agorademo/src/store/store.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/selectors/index.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/index.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/type.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/views/JoinMeetingInput.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/entryboard.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/selectors/common.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/common.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/meetingstatus.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/auth.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/client.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/error.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/agora/index.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/index.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/agora/configbuilder.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/agora/events.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/agora/agoraclient.js",["140"],"import AgoraRTC from 'agora-rtc-sdk';\nimport enhanceAgoraRTC from 'agoran-awe';\nimport {CODEC, MODE, AgoraConfigBuilder} from './configbuilder';\nimport {isEmpty} from 'loadsh';\n\nconst enhancedAgoraRTC = enhanceAgoraRTC(AgoraRTC)\n\nclass AgoraClient {\n  constructor() {\n    this._client = null;\n    this._userId = null;\n  }\n\n  checkConfig(config) {\n    const {mode, codec} = config || {};\n    return Object.values(MODE).includes(mode) && Object.values(CODEC).includes(codec);\n  }\n\n  checkClient() {\n    if (this._client === null) {\n      throw new Error('client is not initialized');\n    }\n  }\n\n  createClient(config) {\n    config = this.checkConfig(config) ? config : AgoraConfigBuilder.defaultConfig();\n    this._client = enhancedAgoraRTC.createClient(config);\n    return this;\n  }\n\n  async init(applicationId) {\n    this.checkClient();\n    if (isEmpty(applicationId)) {\n      throw new Error('applicationId cannot be empty')\n    }\n    await this._client.init(applicationId);\n  }\n\n  async join({token, channel, userId}) {\n    this.checkClient();\n    this._userId = userId;\n    await this._client.join(token, channel, userId);\n  }\n\n  async getCameras() {\n    this.checkClient();\n    return this._client.getCameras();\n  }\n\n  async getRecordingDevices() {\n    this.checkClient();\n    return this._client.getRecordingDevices();\n  }\n\n  getRandomStreamId() {\n    const uid = this._userId || Math.floor(Math.random() * 10000);\n    const now = Date.now();\n\n    return uid.toString() + now.toString();\n  }\n\n  async startStream({audio=true, video=true, screen=false}) {\n    this.checkClient();\n    const streamID = this.getRandomStreamId();\n    const stream = enhancedAgoraRTC.createStream({\n      audio,\n      video,\n      screen,\n      streamID,\n    });\n    await stream.init();\n    await this._client.publish(stream);\n  }\n\n  async leave() {\n    this.checkClient();\n    await this._client.leave();\n  }\n\n  addEventListener(event, callback) {\n    this._client.on(event, callback);\n\n    return () => {\n      this._client.off(event, callback);\n    }\n  }\n}\n\n\nexport default AgoraClient;\n","/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/auth.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/client.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/meetingstatus.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/error.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/entryboard.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/common.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/views/ErrorCard.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/views/ConfigInput.js",["141"],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/actions/config.js",[],"/Users/shuangquan.huang/Documents/git/agorademo/src/store/reducers/config.js",[],{"ruleId":"142","replacedBy":"143"},{"ruleId":"144","replacedBy":"145"},{"ruleId":"146","severity":1,"message":"147","line":97,"column":6,"nodeType":"148","endLine":97,"endColumn":8,"suggestions":"149"},{"ruleId":"150","severity":1,"message":"151","line":38,"column":5,"nodeType":"152","messageId":"153","endLine":38,"endColumn":44},{"ruleId":"146","severity":1,"message":"154","line":61,"column":6,"nodeType":"148","endLine":61,"endColumn":8,"suggestions":"155"},"no-native-reassign",["156"],"no-negated-in-lhs",["157"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'onRemoteStreamAdded', 'onRemoteStreamRemoved', and 'props'. Either include them or remove the dependency array.","ArrayExpression",["158"],"no-unreachable","Unreachable code.","ExpressionStatement","unreachableCode","React Hook useEffect has missing dependencies: 'onCameraChanged' and 'onMicrophoneChanged'. Either include them or remove the dependency array.",["159"],"no-global-assign","no-unsafe-negation",{"desc":"160","fix":"161"},{"desc":"162","fix":"163"},"Update the dependencies array to be: [onRemoteStreamAdded, onRemoteStreamRemoved, props]",{"range":"164","text":"165"},"Update the dependencies array to be: [onCameraChanged, onMicrophoneChanged]",{"range":"166","text":"167"},[2768,2770],"[onRemoteStreamAdded, onRemoteStreamRemoved, props]",[2045,2047],"[onCameraChanged, onMicrophoneChanged]"]